<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<title>Testing page</title>
  <link href="/stylesheets/all.css" rel="stylesheet" type="text/css">
  <style>
#calendar-container {
	width:100%;
	height:100%;
	overflow:hidden;
	position:relative;
}

#calenders {
	position:absolute;
	left:0px;
	width:1300%;
    	-webkit-transition:all 1.0s ease-in-out;
	-moz-transition:all 1.0s ease-in-out;
	-o-transition:all 1.0s ease-in-out;
	-ms-transition:all 1.0s ease-in-out;
	transition:all 1.0s ease-in-out;
}

#calenders.fast {
    	-webkit-transition:all 0.3s ease-in-out;
	-moz-transition:all 0.3s ease-in-out;
	-o-transition:all 0.3s ease-in-out;
	-ms-transition:all 0.3s ease-in-out;
	transition:all 0.3s ease-in-out;
}

#notused {
    -webkit-transition:none;
	-moz-transition:none;
	-o-transition:none;
	-ms-transition:none;
	transition:none;
	-webkit-transition:all 1.0s ease-in-out;
	-moz-transition:all 1.0s ease-in-out;
	-o-transition:all 1.0s ease-in-out;
	-ms-transition:all 1.0s ease-in-out;
	transition:all 1.0s ease-in-out;
}

#calenders div, #calenders li, #calenders span {
	padding:0;
	margin:0;
}

#calenders .calendar {
  display: inline-block;
}
  </style>
  <script src="/javascripts/jquery-1.4.2.min.js"></script>
  <script src="/javascripts/jquery.calendar-widget.js"></script>
  <!--fixes a broken json parser on some android phones -->
  <script>window.JSON = null;</script>
  <script src="/javascripts/json2.js"></script>
  <script src="/javascripts/lawnchair-0.6.1.min.js"></script>
  <script src="/javascripts/query.js"></script>
  <script src="/javascripts/mustache.js"></script>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <link rel="Icon" href="/images/favicon.ico">
  <link rel="apple-touch-icon" href="/images/icon.png"/>
  <link rel="apple-touch-icon-precomposed" href="/images/precomposed-icon.png"/>
  <link rel="apple-touch-startup-image" href="/images/startup.png">
</head>

<body>
<h1>Animation Tests</h1>

<div id="calendar-container">
  <div id="calenders" class="fast">
  </div>
</div>


<script>
/*
  all 12 months are there but only prev, current, and next populate
  animate between the 12 cubes redrwaring only prev, current, and next
  if they pass a year animate quickly all the way over and redraw...
  starting animation should also be like 0.1 opposed to full second.
  all done except the only drawing 3 of the calendars
*/

var flipAnimationSpeed = function() {
  $("#calenders").toggleClass('fast');
}

setTimeout('flipAnimationSpeed()', 400)

//build calender collection
var n = 0;
var new_cal = $("<span class='calendar'><p></p></span>");
do {
  new_cal = $("<span class='calendar'><p></p></span>");
  new_cal.attr("id","calendar-"+n);
  $("#calenders").append(new_cal);
  ++n;
} while (n<12)

var next_month_and_year = function(){
 month = month + 1;
 if(month >= 12) {
  year = year + 1;
  month = 0;
 }
}

var prev_month_and_year = function(){
  month = month - 1;
  if(month < 0) {
    year = year - 1;
    month = 12;
  }
}

var month = 0;
var year = 2012;
n = 0;
do {
  $("#calendar-"+n).calendarWidget({
    month: month,
    year: year
  });
  next_month_and_year();
  ++n;
} while (n<12)

var shift_width = document.documentElement.clientWidth; //screen.width;
current_date = new Date();
//reset month to now
month = current_date.getMonth();
var current_position = (month) * shift_width;
$("#calenders .calendar table").css("width", shift_width);
$("#calenders .calendar").css("width", shift_width);

//center calendar on current month
$("#calenders").css("-webkit-transform","translate(-"+current_position+"px"+",0px)");

$("#next-month").unbind('click');
$(".next-month").unbind('click');
$('.next-month').live('click', function() {
  next_month_and_year();
  current_position = (month) * shift_width;
  if(typeof($("#calenders")[0].style['-webkit-transform'])!='undefined')
  {
    $("#calenders").css("-webkit-transform","translate(-"+current_position+"px"+",0px)");
  } else {
    $("#calenders").css("left","-"+shift_width*2+"px");
  }

  return false;
});

$("#prev-month").unbind('click');
$(".prev-month").unbind('click');
$('.prev-month').click( function() {
  prev_month_and_year();
  current_position = (month) * shift_width;
  if(typeof($("#calenders")[0].style['-webkit-transform'])!='undefined') {
    $("#calenders").css("-webkit-transform","translate(-"+current_position+"px"+",0px)");
  } else {
    $("#calenders").css("left","0px");
  }
  return false;
});
</script>
</body> </html>
